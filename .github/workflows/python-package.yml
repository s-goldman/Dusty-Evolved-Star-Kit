name: PR pytest

on:
  pull_request:
    
jobs:
  check:
    uses: OpenAstronomy/github-actions-workflows/.github/workflows/tox.yml@v1
    with:
      envs: |
        - linux: check-style
  crds_contexts:
    uses: spacetelescope/crds/.github/workflows/contexts.yml@master
  test:
    uses: OpenAstronomy/github-actions-workflows/.github/workflows/tox.yml@v1
    with:
      libraries: |
        brew:
          - hdf5
      envs: |
        - linux: py310-xdist
        - linux: py311-xdist
        - macos: py311-xdist
        - linux: py3-cov-xdist
          coverage: codecov
